{% extends 'base.html' %}

{% block meta %}
<link rel="stylesheet" type="text/css" href="/media/css/game.css" type="text/css" />

<script type="text/javascript" src="/media/js/game.js"></script>

{% endblock meta %}

{% block header_title %}
AI mode
{% endblock header_title %}

{% block style %}
{% endblock style %}

{% block content %}

    <ul id="phases">
        <li class="active draw">
            Draw & heal
        </li>
        <li class="play play_1">
            Play (offensive)
        </li>
        <li class="attack">
            Attack
        </li>
        <li class="play play_2">
            Play (strategic)
        </li>
        <li class="active draw">
            AI Draw & heal
        </li>
        <li class="play play_1">
            AI Play (offensive)
        </li>
        <li class="attack">
            AI Attack
        </li>
        <li class="play play_2">
            AI Play (strategic)
        </li>
    </ul>

    <div class="ai board">
        {% block ai_nodes %}
            {% for node in board %}
            <div class="node empty" name="{{ node.pk }}" style="left:{{node.board_x_ai}}px;top:{{node.board_y_ai}}px;">
                </div>
            {% endfor %}
        {% endblock ai_nodes %}
    </div>

    <div id="ai_tech" class="ai tech" name="tech">
        <h1>T1</h1>
    </div>
    <div id="ai_life" class="ai life">
        <h1>10</h1> 
    </div>

    <div class="friendly board">
        {% block friendly_nodes %}
            {% for node in board %}
            <div class="node empty" name="{{ node.pk }}" style="left:{{node.board_x_friendly}}px;top:{{node.board_y_friendly}}px;">
                </div>
            {% endfor %}
        {% endblock friendly_nodes %}
    </div>

    <ul id="friendly_hand">
    </ul>

    <div id="friendly_tech" class="tech" name="tech">
        <h1>T1</h1>
    </div>
    <div id="friendly_life" class="friendly life">
        <h1>10</h1> 
    </div>

    <form id="current_turn" method="post" action="/playing/end_turn/">
        {% csrf_token %}

        <input name="card1" />
        <input name="node1" />
        <input name="align1" />

        <input name="card2" />
        <input name="node2" />
        <input name="align2" />

        <input name="i_win" type="checkbox" />
    </form>

    <script>

        $(function() {
            {% for node in board %}
                board_node_locs["{{ node.pk }}"] = { "row": {{ node.row }}, "x": {{ node.x }} }; 
                if (! board_node_pks["{{ node.row }}"] ) {
                    board_node_pks["{{ node.row }}"] = {};
                }
                board_node_pks["{{ node.row }}"]["{{ node.x }}"] = "{{ node.pk }}";
            {% endfor %} 


            {% if puzzle %}
                set_player_life("friendly", {{ puzzle.player_life }} ); 
            {% endif %}


            draw_starting_hand();
        });

    </script>
{% endblock content %}
